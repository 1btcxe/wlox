<VirtualHost *:80>
DocumentRoot /sites/laserx
ServerName laserx.rustybrick.net

php_flag register_globals off

ErrorDocument 404 /redirect.php
RewriteEngine On

# handle products
RewriteCond   %{REQUEST_URI}  !^/edit/.*
RewriteRule ^/Custom/.*-P([0-9]*).html /custom_product.php?product_id=$1 [QSA]
RewriteRule ^/.*-P([0-9]*).html /product.php?product_id=$1 [QSA]

# handle cat brands
RewriteCond   %{REQUEST_URI}  !^/edit/.*
RewriteRule ^/.*-C([0-9]*)/.*-B([0-9]*)/P-([0-9]*)/$ /category.php?cat_id=$1&brand_id=$2&entrant=$3 [QSA]
RewriteRule ^/.*-C([0-9]*)/.*-B([0-9]*)/$ /category.php?cat_id=$1&brand_id=$2 [QSA]

# handle categories
RewriteCond   %{REQUEST_URI}  !^/edit/.*
RewriteRule ^/.*-C([0-9]*)/P-([0-9]*)/$ /category.php?cat_id=$1&entrant=$2  [QSA]
RewriteRule ^/.*-C([0-9]*)/$ /category.php?cat_id=$1  [QSA]
RewriteRule ^/.*-L([0-9]*)/$ /landing.php?cat_id=$1  [QSA]
RewriteRule ^/.*All\-Products/$ /category.php?cat_id=  [QSA]

# handle brands
RewriteCond   %{REQUEST_URI}  !^/edit/.*
RewriteRule ^/.*-B([0-9]*)/P-([0-9]*)/$ /category.php?brand_id=$1&entrant=$2  [QSA]
RewriteRule ^/.*-B([0-9]*)/$ /category.php?brand_id=$1  [QSA]

RewriteRule ^/*proddetail.php*/?$	/redirect.php
RewriteRule ^/*products.php*/?$	/redirect.php

# handle cms
RewriteRule	^(/contact/)$ /contact-us.php [QSA]
RewriteCond   %{REQUEST_URI}  !^/edit/.*
RewriteCond   /sites/laserx/%{REQUEST_FILENAME} !-f
RewriteRule	^(/[A-Za-z0-9]+(-[A-Za-z0-9]*)*/)$ /articles.php?article_url=$1 [L]


</VirtualHost>